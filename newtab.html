<!DOCTYPE html>
<html>
  <head>
    <style>
      body {
        background-color: red;
        background-size: cover;
        display: grid;
        place-items: center;
        height: 100vh;
      }

      a {
        font-size: 2rem;
        color: white;
        text-decoration: none;
      }
    </style>
  </head>
  <body>
    <a target="_blank" href="">
      <img src="" alt="cat" width="200" style="visibility: hidden;" />
    </a>
  </body>
  <script>
    const anchor_link = document.getElementsByTagName("a")[0];
    const image = document.getElementsByTagName("img")[0];

    const base_url = "http://localhost:1337";

    const fetch_youtube_premier_url = () => {
      fetch(base_url + "/api/youtube-premier-urls")
        .then((res) => res.json())
        .then((res) => {
          const url = res.data[0].attributes.url;
          anchor_link.href = url;
        });
    };
    fetch_youtube_premier_url();
    setInterval(() => {
      fetch_youtube_premier_url();
    }, 1000);

    const fetch_background_image = () => {
      fetch(base_url + "/api/new-tab-hero-images?populate=%2A")
        .then((res) => res.json())
        .then((res) => {
          const url =
            res.data[0].attributes.image.data.attributes.formats.thumbnail.url;
          image.src = base_url + url;
          image.style.visibility = "visible";
        });
    };
    fetch_background_image();
    setInterval(() => {
      fetch_background_image();
    }, 1000);
  </script>
</html>
